<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emason Hub</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="logo">
            <img src="images/logo.png" alt="Emason Hub Logo">
        </div>
        <nav>
            <ul>
                <li><a href="#home">HOME</a></li>
                <li><a href="#catalog">SHOP BY CATEGORY</a></li>
                <li>
                    <button class="cart-button" onclick="location.href='#cart'">
                        <img src="images/cart.png" alt="Cart">
                        CART (<span id="cart-count">0</span>)
                    </button>
                </li>
            </ul>
        </nav>
    </header>
    
    <section id="home" class="hero">
        <img src="images/imageTOP.jpg" alt="Curtains Display">
        <div class="hero-text">
            <h1>EMASON HUB</h1>
            <p>Bring home interiors at your doorstep</p>
            <button onclick="location.href='#catalog'">SHOP NOW</button>
        </div>
    </section>

    <section id="catalog" class="catalog">
        <h2 class="section-title">Shop by Category</h2>
        <div class="categories">
            <button onclick="showCategory('curtains')">Curtains</button>
            <button onclick="showCategory('wallpapers')">Wallpapers</button>
            <button onclick="showCategory('windowblinds')">Window Blinds</button>
        </div>
    </section>

    <div id="products-container"></div>

    <section id="cart" class="cart">
        <h2 class="section-title">Your Cart</h2>
        <div id="cart-items"></div>
        <button class="place-order-button" onclick="placeOrder()">PLACE ORDER</button>
    </section>
    
    <section class="testimonials">
        <h2>Testimonials</h2>
        <div class="testimonial">
            <p>"Emason Hub has transformed my living room with their beautiful curtains. The quality is top-notch and the service was excellent. Highly recommend!"</p>
            <p>- Chinedu Okafor</p>
        </div>
        <div class="testimonial">
            <p>"I am extremely satisfied with the wallpapers I purchased from Emason Hub. They have a wide variety of designs and the installation was seamless. Great job!"</p>
            <p>- Aisha Bello</p>
        </div>
        <div class="testimonial">
            <p>"The window blinds I got from Emason Hub are perfect. They add a touch of elegance to my office. The customer service was also very helpful and responsive."</p>
            <p>- Tunde Adeyemi</p>
        </div>
        <img src="images/logo.png" alt="Emason Hub Logo" class="testimonials-img">
    </section>
    
    <footer>
        <p>Contact us: <a href="mailto:emasonhub@gmail.com">info@emasonhub.com</a></p>
        <p>Follow us on Instagram: <a href="https://www.instagram.com/emason_curtainhub?igsh=MTJrZm9xMjEzcWV2Nw==" target="_blank" rel="noopener">@emasonhub</a></p>
        <p>&copy; 2025. All Rights Reserved.</p>
    </footer>

    <button class="back-to-top" onclick="scrollToTop()">↑</button>

    <script>
        const cart = [];

        function updatePrice(sizeId, quantityId, priceId, productId) {
            const size = document.getElementById(sizeId).value;
            const quantity = document.getElementById(quantityId).value;
            const price = productPrices[productId][size] * quantity;
            document.getElementById(priceId).innerText = `₦${price}`;
        }

        function changeQuantity(quantityId, delta) {
            const quantityInput = document.getElementById(quantityId);
            let quantity = parseInt(quantityInput.value);
            quantity = Math.max(1, Math.min(9, quantity + delta));
            quantityInput.value = quantity;
            const sizeId = quantityId.replace('quantity', 'size');
            const priceId = quantityId.replace('quantity', 'price');
            const productId = quantityId.replace('quantity', 'product');
            updatePrice(sizeId, quantityId, priceId, productId);
        }

        function addToCart(name, color, sizeId, quantityId, priceId) {
            const size = document.getElementById(sizeId).value;
            const quantity = document.getElementById(quantityId).value;
            const price = document.getElementById(priceId).innerText;
            cart.push({ name, color, size, quantity, price });
            updateCartCount();
            displayCartItems();
        }

        function updateCartCount() {
            document.getElementById('cart-count').innerText = cart.length;
        }

        function displayCartItems() {
            const cartItems = document.getElementById('cart-items');
            cartItems.innerHTML = '';
            cart.forEach((item, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'cart-item';
                itemDiv.innerHTML = `
                    <p>${item.name} - ${item.color} - ${item.size} - Quantity: ${item.quantity} - ${item.price}</p>
                    <button onclick="removeFromCart(${index})">REMOVE</button>
                `;
                cartItems.appendChild(itemDiv);
            });
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCartCount();
            displayCartItems();
        }

        function placeOrder() {
            if (cart.length === 0) {
                alert('Your cart is empty!');
                return;
            }
            const message = cart.map(item => `Product: ${item.name}, Color: ${item.color}, Size: ${item.size}, Quantity: ${item.quantity}, Price: ${item.price}`).join('\n');
            const whatsappUrl = `https://wa.me/+2348084251659?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        function showCategory(categoryId) {
            const categoryElement = document.getElementById(categoryId);
            if (!categoryElement) {
                console.error(`Category element with id '${categoryId}' not found.`);
                return;
            }
            document.querySelectorAll('.products').forEach(section => {
                section.classList.add('hidden');
            });
            categoryElement.classList.remove('hidden');
            categoryElement.scrollIntoView({ behavior: 'smooth' });
        }

        async function loadProducts() {
            try {
                const response = await fetch('products.json');
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                const products = await response.json();
                const container = document.getElementById('products-container');

                for (const category in products) {
                    const section = document.createElement('section');
                    section.id = category;
                    section.className = 'products hidden';
                    section.innerHTML = `<h3 class="section-subtitle">${category.charAt(0).toUpperCase() + category.slice(1)}</h3>`;

                    products[category].forEach((product, index) => {
                        const productDiv = document.createElement('div');
                        productDiv.className = 'product';
                        productDiv.innerHTML = `
                            <img src="${product.image}" alt="${product.name}">
                            <div class="product-details">
                                <h3>${product.name}</h3>
                                <p>Color - ${product.color}</p>
                                <p>
                                    <label for="size${category}${index}">Size:</label>
                                    <select id="size${category}${index}" name="size${category}${index}" onchange="updatePrice('size${category}${index}', 'quantity${category}${index}', 'price${category}${index}', '${category}${index}')">
                                        ${Object.keys(product.sizes).map(size => `<option value="${size}">${size.charAt(0).toUpperCase() + size.slice(1)}</option>`).join('')}
                                    </select>
                                </p>
                                <p>
                                    <label for="quantity${category}${index}">Quantity:</label>
                                    <div class="quantity-controls">
                                        <button type="button" onclick="changeQuantity('quantity${category}${index}', -1)">-</button>
                                        <input type="number" id="quantity${category}${index}" name="quantity${category}${index}" value="1" min="1" max="9" readonly>
                                        <button type="button" onclick="changeQuantity('quantity${category}${index}', 1)">+</button>
                                    </div>
                                </p>
                                <p>Price: <span id="price${category}${index}">₦${product.sizes.small}</span></p>
                                <button onclick="addToCart('${product.name}', '${product.color}', 'size${category}${index}', 'quantity${category}${index}', 'price${category}${index}')">ADD TO CART</button>
                            </div>
                        `;
                        section.appendChild(productDiv);
                    });

                    container.appendChild(section);
                }
            } catch (error) {
                console.error('Failed to load products:', error);
            }
        }

        loadProducts();

        window.onscroll = function() {
            const backToTopButton = document.querySelector('.back-to-top');
            if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) {
                backToTopButton.style.display = 'block';
            } else {
                backToTopButton.style.display = 'none';
            }
        };

        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    </script>
</body>
</html>
